# Calendar Library Options for Doctor Schedule

## Hi·ªán Tr·∫°ng

Hi·ªán t·∫°i ƒëang d√πng **custom implementation** v·ªõi vanilla React. C√≥ ∆∞u ƒëi·ªÉm l√†:

- ‚úÖ Ki·ªÉm so√°t ho√†n to√†n
- ‚úÖ Kh√¥ng ph·ª• thu·ªôc external library
- ‚úÖ Customize d·ªÖ d√†ng
- ‚ùå T·ªën th·ªùi gian maintain
- ‚ùå Thi·∫øu features n√¢ng cao (drag-drop, resize, recurring events)

## üìö Th∆∞ Vi·ªán N√™n D√πng

### 1. **FullCalendar** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

**Best choice cho production healthcare apps**

```bash
npm install @fullcalendar/react @fullcalendar/core @fullcalendar/daygrid @fullcalendar/timegrid @fullcalendar/interaction
```

**Pros**:

- ‚úÖ R·∫•t mature (10+ years)
- ‚úÖ Week/Month/Day views s·∫µn
- ‚úÖ Drag & drop appointments
- ‚úÖ Resize events
- ‚úÖ Recurring events
- ‚úÖ Resource scheduling (multi-doctor)
- ‚úÖ Mobile responsive
- ‚úÖ Timezone support
- ‚úÖ Export to PDF/iCal
- ‚úÖ Documentation t·ªët

**Cons**:

- ‚ö†Ô∏è Bundle size l·ªõn (~200KB)
- ‚ö†Ô∏è Premium features tr·∫£ ph√≠ ($199/year)
- ‚ö†Ô∏è Ph·ª©c t·∫°p ƒë·ªÉ setup ban ƒë·∫ßu

**Example**:

```tsx
import FullCalendar from "@fullcalendar/react";
import dayGridPlugin from "@fullcalendar/daygrid";
import timeGridPlugin from "@fullcalendar/timegrid";
import interactionPlugin from "@fullcalendar/interaction";

<FullCalendar
  plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}
  initialView="timeGridWeek"
  headerToolbar={{
    left: "prev,next today",
    center: "title",
    right: "dayGridMonth,timeGridWeek,timeGridDay",
  }}
  events={appointments.map((apt) => ({
    id: apt.id,
    title: apt.patientName,
    start: `${apt.date}T${apt.startTime}`,
    end: `${apt.date}T${apt.endTime}`,
    backgroundColor: getColor(apt.status),
  }))}
  editable={true}
  selectable={true}
  eventClick={handleEventClick}
  eventDrop={handleEventDrop}
  eventResize={handleEventResize}
/>;
```

**Demo**: https://fullcalendar.io/demos

---

### 2. **React Big Calendar** ‚≠ê‚≠ê‚≠ê‚≠ê

**Best choice cho open-source, mi·ªÖn ph√≠**

```bash
npm install react-big-calendar moment
```

**Pros**:

- ‚úÖ Ho√†n to√†n mi·ªÖn ph√≠
- ‚úÖ Bundle size nh·ªè (~50KB)
- ‚úÖ D·ªÖ customize
- ‚úÖ Week/Month/Day/Agenda views
- ‚úÖ Drag & drop (v·ªõi plugin)
- ‚úÖ Active community
- ‚úÖ TypeScript support

**Cons**:

- ‚ö†Ô∏è √çt features h∆°n FullCalendar
- ‚ö†Ô∏è Styling c·∫ßn nhi·ªÅu custom CSS
- ‚ö†Ô∏è Documentation kh√¥ng chi ti·∫øt l·∫Øm

**Example**:

```tsx
import { Calendar, momentLocalizer } from "react-big-calendar";
import moment from "moment";
import "react-big-calendar/lib/css/react-big-calendar.css";

const localizer = momentLocalizer(moment);

<Calendar
  localizer={localizer}
  events={appointments.map((apt) => ({
    id: apt.id,
    title: apt.patientName,
    start: new Date(`${apt.date}T${apt.startTime}`),
    end: new Date(`${apt.date}T${apt.endTime}`),
    resource: apt,
  }))}
  startAccessor="start"
  endAccessor="end"
  views={["month", "week", "day", "agenda"]}
  defaultView="week"
  style={{ height: 700 }}
  onSelectEvent={handleSelectEvent}
  onSelectSlot={handleSelectSlot}
  selectable
/>;
```

**Demo**: https://jquense.github.io/react-big-calendar/examples/

---

### 3. **React Calendar Timeline** ‚≠ê‚≠ê‚≠ê

**Best cho timeline horizontal view**

```bash
npm install react-calendar-timeline moment
```

**Pros**:

- ‚úÖ Timeline view ƒë·∫πp
- ‚úÖ Zoom in/out
- ‚úÖ Multi-resource (nhi·ªÅu b√°c sƒ©)
- ‚úÖ Performance t·ªët v·ªõi data l·ªõn

**Cons**:

- ‚ö†Ô∏è Ch·ªâ c√≥ timeline view
- ‚ö†Ô∏è Kh√¥ng c√≥ month/week grid view

**Use case**: Khi mu·ªën xem nhi·ªÅu b√°c sƒ© c√πng l√∫c (resource scheduling)

---

### 4. **TUI Calendar** ‚≠ê‚≠ê‚≠ê‚≠ê

**Korean library, r·∫•t ƒë·∫πp**

```bash
npm install @toast-ui/react-calendar
```

**Pros**:

- ‚úÖ UI/UX ƒë·∫πp, modern
- ‚úÖ Mi·ªÖn ph√≠
- ‚úÖ Week/Month/Day views
- ‚úÖ Drag & drop
- ‚úÖ Mobile responsive

**Cons**:

- ‚ö†Ô∏è Documentation ti·∫øng H√†n/Anh l·∫´n l·ªôn
- ‚ö†Ô∏è Community nh·ªè h∆°n

---

## üéØ Recommendation

### Cho d·ª± √°n n√†y, t√¥i recommend:

#### **Option 1: React Big Calendar** (FREE, d·ªÖ d√πng)

```bash
npm install react-big-calendar moment
npm install --save-dev @types/react-big-calendar
```

**L√Ω do**:

- Mi·ªÖn ph√≠ ho√†n to√†n
- ƒê·ªß features cho healthcare scheduling
- D·ªÖ integrate v·ªõi existing code
- TypeScript support
- Active maintenance

#### **Option 2: FullCalendar** (PRO, nhi·ªÅu t√≠nh nƒÉng)

N·∫øu c·∫ßn:

- Recurring appointments (l·∫∑p l·ªãch)
- Multi-doctor resource scheduling
- Advanced drag & drop
- Premium support

---

## üîß Migration Plan

### B∆∞·ªõc 1: C√†i ƒë·∫∑t React Big Calendar

```bash
cd client
npm install react-big-calendar moment
npm install --save-dev @types/react-big-calendar
```

### B∆∞·ªõc 2: T·∫°o wrapper component

**`components/Calendar/DoctorCalendar.tsx`**:

```tsx
"use client";

import { Calendar, momentLocalizer, View } from "react-big-calendar";
import moment from "moment";
import "react-big-calendar/lib/css/react-big-calendar.css";
import "./DoctorCalendar.css"; // Custom styles

moment.locale("vi");
const localizer = momentLocalizer(moment);

interface Appointment {
  id: string;
  patientName: string;
  date: string;
  startTime: string;
  endTime: string;
  status: string;
  // ... other fields
}

interface CalendarEvent {
  id: string;
  title: string;
  start: Date;
  end: Date;
  resource: Appointment;
}

interface Props {
  appointments: Appointment[];
  onSelectEvent: (event: CalendarEvent) => void;
  onSelectSlot: (slotInfo: any) => void;
  view?: View;
}

export default function DoctorCalendar({ appointments, onSelectEvent, onSelectSlot, view = "week" }: Props) {
  const events: CalendarEvent[] = appointments.map((apt) => ({
    id: apt.id,
    title: apt.patientName,
    start: new Date(`${apt.date}T${apt.startTime}`),
    end: new Date(`${apt.date}T${apt.endTime}`),
    resource: apt,
  }));

  const eventStyleGetter = (event: CalendarEvent) => {
    const status = event.resource.status;
    let backgroundColor = "#3174ad";

    switch (status) {
      case "confirmed":
        backgroundColor = "#10b981";
        break;
      case "pending":
        backgroundColor = "#f59e0b";
        break;
      case "completed":
        backgroundColor = "#6366f1";
        break;
      case "cancelled":
        backgroundColor = "#ef4444";
        break;
    }

    return {
      style: {
        backgroundColor,
        borderRadius: "8px",
        opacity: 0.9,
        color: "white",
        border: "none",
        display: "block",
        padding: "4px",
      },
    };
  };

  return (
    <Calendar
      localizer={localizer}
      events={events}
      startAccessor="start"
      endAccessor="end"
      style={{ height: "calc(100vh - 200px)" }}
      defaultView={view}
      views={["month", "week", "day", "agenda"]}
      step={30}
      showMultiDayTimes
      onSelectEvent={onSelectEvent}
      onSelectSlot={onSelectSlot}
      selectable
      eventPropGetter={eventStyleGetter}
      messages={{
        next: "Sau",
        previous: "Tr∆∞·ªõc",
        today: "H√¥m nay",
        month: "Th√°ng",
        week: "Tu·∫ßn",
        day: "Ng√†y",
        agenda: "L·ªãch tr√¨nh",
        date: "Ng√†y",
        time: "Th·ªùi gian",
        event: "S·ª± ki·ªán",
        noEventsInRange: "Kh√¥ng c√≥ l·ªãch h·∫πn n√†o.",
      }}
      formats={{
        dayHeaderFormat: (date: Date) => moment(date).format("dddd DD/MM"),
        dayRangeHeaderFormat: ({ start, end }) =>
          `${moment(start).format("DD/MM/YYYY")} - ${moment(end).format("DD/MM/YYYY")}`,
        agendaHeaderFormat: ({ start, end }) =>
          `${moment(start).format("DD/MM")} - ${moment(end).format("DD/MM/YYYY")}`,
        timeGutterFormat: (date: Date) => moment(date).format("HH:mm"),
      }}
    />
  );
}
```

### B∆∞·ªõc 3: Custom CSS

**`components/Calendar/DoctorCalendar.css`**:

```css
/* Override default styles */
.rbc-calendar {
  font-family: inherit;
}

.rbc-header {
  padding: 12px 4px;
  font-weight: 600;
  background: linear-gradient(to bottom, #f9fafb, #f3f4f6);
  border-bottom: 2px solid #e5e7eb;
}

.rbc-today {
  background-color: #dbeafe !important;
}

.rbc-time-slot {
  min-height: 40px;
}

.rbc-event {
  padding: 4px 8px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: all 0.2s;
}

.rbc-event:hover {
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15);
  transform: translateY(-1px);
}

.rbc-event-label {
  display: none; /* Hide default time label */
}

.rbc-toolbar {
  padding: 16px 0;
  margin-bottom: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.rbc-toolbar button {
  padding: 8px 16px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  background: white;
  color: #374151;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.rbc-toolbar button:hover {
  background: #f9fafb;
  border-color: #9ca3af;
}

.rbc-toolbar button.rbc-active {
  background: #2563eb;
  color: white;
  border-color: #2563eb;
}

.rbc-month-view {
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  overflow: hidden;
}

.rbc-time-view {
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  overflow: hidden;
}
```

### B∆∞·ªõc 4: S·ª≠ d·ª•ng trong page

**`app/doctor/schedule/page.tsx`**:

```tsx
"use client";

import { useState } from "react";
import DoctorCalendar from "@/components/Calendar/DoctorCalendar";
import { AppointmentSocketProvider } from "@/contexts/AppointmentSocketContext";

function DoctorScheduleContent() {
  const [appointments, setAppointments] = useState(SAMPLE_APPOINTMENTS);
  const [selectedAppointment, setSelectedAppointment] = useState(null);
  const [detailModalOpen, setDetailModalOpen] = useState(false);

  const handleSelectEvent = (event) => {
    setSelectedAppointment(event.resource);
    setDetailModalOpen(true);
  };

  const handleSelectSlot = (slotInfo) => {
    console.log("Selected slot:", slotInfo);
    // Open "New Appointment" modal
  };

  return (
    <div className="min-h-screen bg-gray-50 p-6">
      <DoctorCalendar
        appointments={appointments}
        onSelectEvent={handleSelectEvent}
        onSelectSlot={handleSelectSlot}
        view="week"
      />

      {/* Detail Modal */}
      {detailModalOpen && (
        <AppointmentDetailModal appointment={selectedAppointment} onClose={() => setDetailModalOpen(false)} />
      )}
    </div>
  );
}

export default function DoctorSchedule() {
  return (
    <AppointmentSocketProvider>
      <DoctorScheduleContent />
    </AppointmentSocketProvider>
  );
}
```

---

## üìä Comparison Table

| Feature              | Custom | React Big Calendar | FullCalendar | TUI Calendar |
| -------------------- | ------ | ------------------ | ------------ | ------------ |
| **Gi√°**              | Free   | Free               | $199/year    | Free         |
| **Bundle Size**      | ~10KB  | ~50KB              | ~200KB       | ~100KB       |
| **Week View**        | ‚úÖ     | ‚úÖ                 | ‚úÖ           | ‚úÖ           |
| **Month View**       | ‚ùå     | ‚úÖ                 | ‚úÖ           | ‚úÖ           |
| **Day View**         | ‚ùå     | ‚úÖ                 | ‚úÖ           | ‚úÖ           |
| **Drag & Drop**      | ‚ùå     | ‚úÖ (plugin)        | ‚úÖ           | ‚úÖ           |
| **Resize Events**    | ‚ùå     | ‚úÖ (plugin)        | ‚úÖ           | ‚úÖ           |
| **Recurring Events** | ‚ùå     | ‚ùå                 | ‚úÖ (paid)    | ‚ùå           |
| **Multi-Resource**   | ‚ùå     | ‚ùå                 | ‚úÖ (paid)    | ‚úÖ           |
| **Mobile Support**   | ‚ö†Ô∏è     | ‚úÖ                 | ‚úÖ           | ‚úÖ           |
| **TypeScript**       | ‚úÖ     | ‚úÖ                 | ‚úÖ           | ‚ö†Ô∏è           |
| **Documentation**    | N/A    | ‚≠ê‚≠ê‚≠ê             | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê   | ‚≠ê‚≠ê‚≠ê       |
| **Learning Curve**   | Low    | Medium             | High         | Medium       |

---

## üéØ Final Decision

### N√™n d√πng: **React Big Calendar**

**L√Ω do**:

1. **Mi·ªÖn ph√≠** - Kh√¥ng t·ªën ti·ªÅn license
2. **ƒê·ªß features** - Week/Month/Day views, drag-drop, selectable
3. **D·ªÖ integrate** - Setup trong 30 ph√∫t
4. **TypeScript support** - Type-safe
5. **Active community** - 6k+ stars, frequent updates
6. **Bundle size h·ª£p l√Ω** - ~50KB

### Khi n√†o n√™n upgrade l√™n FullCalendar:

- C·∫ßn **recurring appointments** (l·ªãch h·∫πn l·∫∑p l·∫°i)
- C·∫ßn **multi-doctor scheduling** (nhi·ªÅu b√°c sƒ© c√πng l√∫c)
- C·∫ßn **resource management** n√¢ng cao
- C√≥ budget cho premium features

---

## üöÄ Next Steps

1. **Install React Big Calendar**

   ```bash
   npm install react-big-calendar moment @types/react-big-calendar
   ```

2. **Create wrapper component** (`DoctorCalendar.tsx`)

3. **Add custom styling** (`DoctorCalendar.css`)

4. **Replace current implementation** in `page.tsx`

5. **Test & refine** UI/UX

6. **Integrate with real API** data

7. **Add socket listeners** for real-time updates

---

**T√°c gi·∫£**: GitHub Copilot
**Ng√†y**: 10/10/2025
**D·ª± √°n**: Smart Dental Healthcare
